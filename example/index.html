<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="shortcut icon" href="img/favicon.ico">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"/>

<title>YouTube API Example</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script src="src/HuK.js" type="text/javascript"></script>
<script src="src/ytf.js" type="text/javascript"></script>
</head>
<body>
<div class="profile">
	<div class="data"></div>
</div>
<div id="video"></div>
<ul id="list"></ul>
<script>
	function uservid(name) {
		ytf.uploader.videos({
			name: name,
			num: 25,
			complete: function(data) {
				HuK('#list')
					.list({
					items: data,
					justItems: true,
					content: HuK()
						.img({src: '<<value.thumbnail[0].url>>'})
							.a({
							href: 'http://www.youtube.com/watch?v=<<value.id>>',
							content: '<b><<value.title>></b> '
						})
					.value()
				}).text()
			}
		})
	}
	HuK('.profile')
		.input({
			type: 'text',
			id: 'loginField'
		})
		.button({
			content: 'Sign In',
			id: 'loginButton',
			click: function() {
				if ($('#loginField').val() != '')
					ytf.login($('#loginField').val(), function(data) {
						HuK('.data')
							.h3({
								content: ['Hello ', HuK().a({
									href: data.link,
									content: data.name
								}).value()]
							})
							.img({src: data.thumbnail})
						.html()

						ytf.newVideos({
							complete: function(data) {
								HuK('#list')
									.list({
										items: data,
										justItems: true,
										itemArgs: {
											id: '<<index>>'
										},
										content: HuK()
											.img({src: '<<value.thumbnail[0].url>>'})
											.span(HuK()
												.a({
													href: 'http://www.youtube.com/watch?v=<<value.id>>',
													content: '<b><<value.title>></b> '
												})
												.span(' by ')
												.a({
													content: ' <i><<value.author.name>></i>',
													href: '#',
													click: function() {
														uservid(this.val.author.name)
													}
												})
											.value())
										.value()
									})
								.text()
							}
						})
					})
			}
		})
		.input({
			type: 'text',
			id: 'searchField'
		})
		.button({
			content: 'Sign In',
			id: 'searchButton',
			click: function() {
				if ($('#searchField').val() != '')
					ytf.search({
						num: 50,
						key: $('#searchField').val(),
						complete: function(data) {
							HuK('#list')
								.list({
									items: data,
									justItems: true,
									itemArgs: {
										id: '<<index>>'
									},
									content: HuK()
										.img({src: '<<value.thumbnail[0].url>>'})
										.span(HuK()
											.a({
												href: 'http://www.youtube.com/watch?v=<<value.id>>',
												content: '<b><<value.title>></b> '
											})
											.span(' by ')
											.a({
												content: ' <i><<value.author.name>></i>',
												href: '#',
												click: function() {
													uservid(this.val.author.name)
												}
											})
										.value())
									.value()
								})
							.text()
						}
					})
			}
		})
	.append()
</script>
</body>